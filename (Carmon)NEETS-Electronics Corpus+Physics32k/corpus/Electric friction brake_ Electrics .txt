The electric current controlling the brake through the electromagnet is provided from a brake controller which provides the control current from the towing vehicle. There are different types of brake controllers on the market, each with their own advantages and disadvantages.
The current controlling the brakes from the towing vehicle is originating in the battery/alternator of the towing vehicle via the brake controller and then transferred via wiring through the electric brake pin in the trailer connector through the trailer wiring to the electromagnet and back through the trailer wiring to the trailer connector and to the towing vehicle chassis/frame through the ground pin in the trailer connector.
To minimize interference between vehicle lighting and brakes the circuits shall be as separated as possible.