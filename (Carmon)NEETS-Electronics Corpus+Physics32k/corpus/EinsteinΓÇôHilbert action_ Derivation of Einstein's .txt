Suppose that the full action of the theory is given by the Einstein–Hilbert term plus a term






L




M





{\displaystyle {\mathcal {L}}_{\mathrm {M} }}
describing any matter fields appearing in the theory.




S
=
∫

[



1

2
κ




R
+



L




M




]



−
g





d


4


x


{\displaystyle S=\int \left[{1 \over 2\kappa }\,R+{\mathcal {L}}_{\mathrm {M} }\right]{\sqrt {-g}}\,\mathrm {d} ^{4}x}

The action principle then tells us that the variation of this action with respect to the inverse metric is zero, yielding








0



=
δ
S






=
∫

[



1

2
κ






δ
(


−
g


R
)


δ

g

μ
ν





+



δ
(


−
g





L




M



)


δ

g

μ
ν






]

δ

g

μ
ν




d


4


x






=
∫

[



1

2
κ




(




δ
R


δ

g

μ
ν





+


R

−
g






δ


−
g




δ

g

μ
ν






)

+


1

−
g






δ
(


−
g





L




M



)


δ

g

μ
ν






]

δ

g

μ
ν




−
g





d


4


x
.






{\displaystyle {\begin{aligned}0&=\delta S\\&=\int \left[{1 \over 2\kappa }{\frac {\delta ({\sqrt {-g}}R)}{\delta g^{\mu \nu }}}+{\frac {\delta ({\sqrt {-g}}{\mathcal {L}}_{\mathrm {M} })}{\delta g^{\mu \nu }}}\right]\delta g^{\mu \nu }\mathrm {d} ^{4}x\\&=\int \left[{1 \over 2\kappa }\left({\frac {\delta R}{\delta g^{\mu \nu }}}+{\frac {R}{\sqrt {-g}}}{\frac {\delta {\sqrt {-g}}}{\delta g^{\mu \nu }}}\right)+{\frac {1}{\sqrt {-g}}}{\frac {\delta ({\sqrt {-g}}{\mathcal {L}}_{\mathrm {M} })}{\delta g^{\mu \nu }}}\right]\delta g^{\mu \nu }{\sqrt {-g}}\,\mathrm {d} ^{4}x.\end{aligned}}}

Since this equation should hold for any variation



δ

g

μ
ν




{\displaystyle \delta g^{\mu \nu }}
, it implies that







δ
R


δ

g

μ
ν





+


R

−
g






δ


−
g




δ

g

μ
ν





=
−
2
κ


1

−
g






δ
(


−
g





L




M



)


δ

g

μ
ν





,


{\displaystyle {\frac {\delta R}{\delta g^{\mu \nu }}}+{\frac {R}{\sqrt {-g}}}{\frac {\delta {\sqrt {-g}}}{\delta g^{\mu \nu }}}=-2\kappa {\frac {1}{\sqrt {-g}}}{\frac {\delta ({\sqrt {-g}}{\mathcal {L}}_{\mathrm {M} })}{\delta g^{\mu \nu }}},}

is the equation of motion for the metric field. The right hand side of this equation is (by definition) proportional to the stress–energy tensor,





T

μ
ν


:=



−
2


−
g






δ
(


−
g





L




M



)


δ

g

μ
ν





=
−
2



δ



L




M





δ

g

μ
ν





+

g

μ
ν





L




M



.


{\displaystyle T_{\mu \nu }:={\frac {-2}{\sqrt {-g}}}{\frac {\delta ({\sqrt {-g}}{\mathcal {L}}_{\mathrm {M} })}{\delta g^{\mu \nu }}}=-2{\frac {\delta {\mathcal {L}}_{\mathrm {M} }}{\delta g^{\mu \nu }}}+g_{\mu \nu }{\mathcal {L}}_{\mathrm {M} }.}

To calculate the left hand side of the equation we need the variations of the Ricci scalar R and the determinant of the metric. These can be obtained by standard text book calculations such as the one given below, which is strongly based on the one given in Carroll 2004.