It may be helpful to visualize this situation using spacetime diagrams. For a given observer, the t-axis is defined to be a point traced out in time by the origin of the spatial coordinate x, and is drawn vertically. The x-axis is defined as the set of all points in space at the time t = 0, and is drawn horizontally. The statement that the speed of light is the same for all observers is represented by drawing a light ray as a 45° line, regardless of the speed of the source relative to the speed of the observer.
In the first diagram, the two ends of the train are drawn as grey lines. Because the ends of the train are stationary with respect to the observer on the train, these lines are just vertical lines, showing their motion through time but not space. The flash of light is shown as the 45° red lines. The points at which the two light flashes hit the ends of the train are at the same level in the diagram. This means that the events are simultaneous.
In the second diagram, the two ends of the train moving to the right, are shown by parallel lines. The flash of light is given off at a point exactly halfway between the two ends of the train, and again form two 45° lines, expressing the constancy of the speed of light. In this picture, however, the points at which the light flashes hit the ends of the train are not at the same level; they are not simultaneous.