If the upstream conditions are such that the gas cannot be treated as ideal, there is no closed form equation for evaluating the choked mass flow. Instead, the gas expansion should be calculated by reference to real gas property tables, where the expansion takes place at constant enthalpy.