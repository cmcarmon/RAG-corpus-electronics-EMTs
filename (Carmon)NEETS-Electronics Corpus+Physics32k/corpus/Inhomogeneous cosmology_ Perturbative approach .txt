In contrast, perturbation theory, which deals with small perturbations from e.g. a homogeneous metric, only holds as long as the perturbations are not too large, and N-body simulations use Newtonian gravity which is only a good approximation when speeds are low and gravitational fields are weak.