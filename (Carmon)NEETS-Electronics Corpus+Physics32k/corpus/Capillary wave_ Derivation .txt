As Richard Feynman put it, "[water waves] that are easily seen by everyone and which are usually used as an example of waves in elementary courses [...] are the worst possible example [...]; they have all the complications that waves can have." The derivation of the general dispersion relation is therefore quite involved.
Therefore, first the assumptions involved are pointed out. There are three contributions to the energy, due to gravity, to surface tension, and to hydrodynamics. The first two are potential energies, and responsible for the two terms inside the parenthesis, as is clear from the appearance of g and σ. For gravity, an assumption is made of the density of the fluids being constant (i.e., incompressibility), and likewise g (waves are not high for gravitation to change appreciably). For surface tension, the deviations from planarity (as measured by derivatives of the surface) are supposed to be small. Both approximations are excellent for common waves.
The last contribution involves the kinetic energies of the fluids, and is the most involved. One must use a hydrodynamic framework to tackle this problem. Incompressibility is again involved (which is satisfied if the speed of the waves is much less than the speed of sound in the media), together with the flow being irrotational – the flow is then potential; again, these are typically good approximations for common situations. The resulting equation for the potential (which is Laplace equation) can be solved with the proper boundary conditions. On one hand, the velocity must vanish well below the surface (in the "deep water" case, which is the one we consider, otherwise a more involved result is obtained, see Ocean surface waves.) On the other, its vertical component must match the motion of the surface. This contribution ends up being responsible for the extra k outside the parenthesis, which causes all regimes to be dispersive, both at low values of k, and high ones (except around the one value at which the two dispersions cancel out.)