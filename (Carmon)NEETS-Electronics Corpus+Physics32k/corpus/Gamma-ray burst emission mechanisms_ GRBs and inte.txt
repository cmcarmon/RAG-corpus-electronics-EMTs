A related constraint is imposed by the relative timescales seen in some bursts between the short-timescale variability and the total length of the GRB. Often this variability timescale is far shorter than the total burst length. For example, in bursts as long as 100 seconds, the majority of the energy can be released in short episodes less than 1 second long. If the GRB were due to matter moving towards Earth (as the relativistic motion argument enforces), it is hard to understand why it would release its energy in such brief interludes. The generally accepted explanation for this is that these bursts involve the collision of multiple shells traveling at slightly different velocities; so-called "internal shocks". The collision of two thin shells flash-heats the matter, converting enormous amounts of kinetic energy into the random motion of particles, greatly amplifying the energy release due to all emission mechanisms. Which physical mechanisms are at play in producing the observed photons is still an area of debate, but the most likely candidates appear to be synchrotron radiation and inverse Compton scattering.
As of 2007 there is no theory that has successfully described the spectrum of all gamma-ray bursts (though some theories work for a subset). However, the so-called Band function (named after David Band) has been fairly successful at fitting, empirically, the spectra of most gamma-ray bursts:




N
(
E
)
=


{





E

α


exp
⁡

(

−


E

E

0





)


,




if


E
≤
(
α
−
β
)

E

0














[


(

α
−
β

)


E

0



]



(

α
−
β

)




E

β


exp
⁡

(

β
−
α

)


,




if


E
>
(
α
−
β
)

E

0















{\displaystyle N(E)={\begin{cases}{E^{\alpha }\exp \left({-{\frac {E}{E_{0}}}}\right)},&{\mbox{if }}E\leq (\alpha -\beta )E_{0}{\mbox{ }}\\{\left[{\left({\alpha -\beta }\right)E_{0}}\right]^{\left({\alpha -\beta }\right)}E^{\beta }\exp \left({\beta -\alpha }\right)},&{\mbox{if }}E>(\alpha -\beta )E_{0}{\mbox{ }}\end{cases}}}

A few gamma-ray bursts have shown evidence for an additional, delayed emission component at very high energies (GeV and higher). One theory for this emission invokes inverse Compton scattering. If a GRB progenitor, such as a Wolf-Rayet star, were to explode within a stellar cluster, the resulting shock wave could generate gamma-rays by scattering photons from neighboring stars. About 30% of known galactic Wolf-Rayet stars, are located in dense clusters of O stars with intense ultraviolet radiation fields, and the collapsar model suggests that WR stars are likely GRB progenitors. Therefore, a substantial fraction of GRBs are expected to occur in such clusters. As the relativistic matter ejected from an explosion slows and interacts with ultraviolet-wavelength photons, some photons gain energy, generating gamma-rays.